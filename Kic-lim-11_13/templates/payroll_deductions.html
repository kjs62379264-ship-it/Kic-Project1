{% extends "base.html" %}

{% block title %}ê³µì œ í•­ëª© ê´€ë¦¬{% endblock %}

{% block page_content %}

<div class="card" style="grid-column: 1 / 3;">
    <div class="card-header">
        <span>ê¸‰ì—¬ ê³µì œ í•­ëª© ê´€ë¦¬</span>
        <a href="{{ url_for('payroll_manage') }}" class="sub-action-btn header-btn">ğŸ”™ ê¸‰ì—¬ ê³„ì‚°ê¸°ë¡œ ëŒì•„ê°€ê¸°</a>
    </div>
    <div class="card-body">
        <h4>ìƒˆ ê³µì œ í•­ëª© ì¶”ê°€</h4>
        <form method="POST" action="{{ url_for('add_deduction') }}" style="display: flex; gap: 10px;">
            <input type="text" name="deduction_name" placeholder="í•­ëª©ëª… (ì˜ˆ: ì¥ê¸°ìš”ì–‘ë³´í—˜)" required style="flex-grow: 1;">
            <input type="number" name="deduction_rate" step="0.001" placeholder="ê³µì œìœ¨ (ì˜ˆ: 0.9082)" required style="width: 150px;">
            <span style="align-self: center;">%</span>
            <button type="submit" class="btn sub-action-btn">ì¶”ê°€</button>
        </form>
        <hr>
        <h4>í˜„ì¬ ê³µì œ í•­ëª© ëª©ë¡</h4>
        <ul class="settings-list">
            {% for item in deductions %}
            <li>
                <span>{{ item['name'] }} ({{ "%.4f%%"|format(item['rate'] * 100) }})</span>
                <div class="button-group">
                    <form method="POST" action="{{ url_for('delete_deduction', deduction_id=item['id']) }}" onsubmit="return confirm('ì •ë§ë¡œ \'{{ item['name'] }}\' í•­ëª©ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?');">
                        <button type="submit" class="danger-action-btn">ì‚­ì œ</button>
                    </form>
                </div>
            </li>
            {% endfor %}
        </ul>
    </div>
</div>

{% endblock %}