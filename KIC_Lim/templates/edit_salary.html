{% extends "base.html" %}

{% block page_title %}ì§ì› ê¸‰ì—¬ ì •ë³´ ë“±ë¡/ìˆ˜ì •{% endblock %}

{% block page_content %}
<div class="card" style="grid-column: 1 / 3;">
    
    <div class="card-header">
        <span>{{ employee.name }} ({{ employee.id }}) ë‹˜ ê¸‰ì—¬ ì •ë³´ {{ 'ìˆ˜ì •' if salary_info else 'ë“±ë¡' }}</span>
        <a href="{{ url_for('salary_management') }}" class="sub-action-btn header-btn">ğŸ”™ ëª©ë¡ìœ¼ë¡œ</a>
    </div>

    <div class="card-body">
        
        <form method="POST" action="{{ url_for('add_salary_info', employee_id=employee.id) }}">
            
            <input type="hidden" name="employee_id" value="{{ employee.id }}">

            <div class="form-group">
                <label for="base_salary">ì—°ë´‰/ê¸°ë³¸ê¸‰ (ì›)</label>
                <input type="number" id="base_salary" name="base_salary" required 
                       value="{{ salary_info.base_salary if salary_info else '' }}" 
                       min="0" placeholder="ìˆ«ìë§Œ ì…ë ¥í•˜ì„¸ìš”">
            </div>

            <div class="form-group">
                <label for="allowance">ê³ ì • ìˆ˜ë‹¹ (ì›)</label>
                <input type="number" id="allowance" name="allowance" 
                       value="{{ salary_info.allowance if salary_info else '0' }}" 
                       min="0" placeholder="ì‹ëŒ€, ì°¨ëŸ‰ ìœ ì§€ë¹„ ë“±">
            </div>

            <div class="form-group">
                <label for="tax_rate">ê¸°ë³¸ ì†Œë“ì„¸ìœ¨ (%)</label>
                <input type="number" id="tax_rate" name="tax_rate" required 
                       value="{{ (salary_info.tax_rate * 100) if salary_info and salary_info.tax_rate else '5.0' }}" 
                       min="0" max="100" step="0.1" placeholder="ì˜ˆ: 5.0">
            </div>

            <div class="form-group">
                <label for="contract_type">ê³„ì•½ í˜•íƒœ</label>
                <select id="contract_type" name="contract_type" required>
                    {% set current_type = salary_info.contract_type if salary_info else '' %}
                    <option value="ì •ê·œì§" {% if current_type == 'ì •ê·œì§' %}selected{% endif %}>ì •ê·œì§</option>
                    <option value="ê³„ì•½ì§" {% if current_type == 'ê³„ì•½ì§' %}selected{% endif %}>ê³„ì•½ì§</option>
                    <option value="íŒŒíŠ¸íƒ€ì„" {% if current_type == 'íŒŒíŠ¸íƒ€ì„' %}selected{% endif %}>íŒŒíŠ¸íƒ€ì„</option>
                </select>
            </div>

            <div class="form-group">
                <label for="payment_cycle">ì§€ê¸‰ ì£¼ê¸°</label>
                <select id="payment_cycle" name="payment_cycle" required>
                    {% set current_cycle = salary_info.payment_cycle if salary_info else '' %}
                    <option value="ì›”ê¸‰" {% if current_cycle == 'ì›”ê¸‰' %}selected{% endif %}>ì›”ê¸‰</option>
                    <option value="ì—°ë´‰" {% if current_cycle == 'ì—°ë´‰' %}selected{% endif %}>ì—°ë´‰</option>
                    <option value="ì£¼ê¸‰" {% if current_cycle == 'ì£¼ê¸‰' %}selected{% endif %}>ì£¼ê¸‰</option>
                </select>
            </div>

            <div class="form-actions">
                <button type="submit" class="btn main-action-btn">{{ 'ìˆ˜ì • ì™„ë£Œ' if salary_info else 'ë“±ë¡í•˜ê¸°' }}</button>
                <a href="{{ url_for('salary_management') }}" class="btn sub-action-btn">ì·¨ì†Œ</a>
            </div>
            
        </form>
    </div>
</div>
{% endblock %}