{% extends "base.html" %}
{% block page_content %}
<div class="card" style="grid-column: 1 / 2;">
    <div class="card-header">ğŸ“„ ì´ë²ˆ ë‹¬ ê¸‰ì—¬ ëª…ì„¸ì„œ ({{ payment.payment_month if payment else '-' }}ì›”)</div>
    <div class="card-body">
        {% if payment %}
        <div style="display: flex; justify-content: space-between; margin-bottom: 20px;">
            <div><strong>ì§€ê¸‰ì¼:</strong> {{ payment.payment_date }}</div>
            <div><strong>ì§€ê¸‰ê³„ì¢Œ:</strong> {{ account.bank_name }} {{ account.account_number }}</div>
        </div>
        <table class="employee-table" style="width: 100%;">
            <tr><th>ì§€ê¸‰ í•­ëª©</th><th>ê¸ˆì•¡</th><th>ê³µì œ í•­ëª©</th><th>ê¸ˆì•¡</th></tr>
            <tr>
                <td>ê¸°ë³¸ê¸‰</td><td style="text-align:right;">{{ payment.total_base|comma }}</td>
                <td>êµ­ë¯¼ì—°ê¸ˆ</td><td style="text-align:right; color: #e74c3c;">{{ payment.national_pension|comma }}</td>
            </tr>
            <tr>
                <td>ìˆ˜ë‹¹ í•©ê³„</td><td style="text-align:right;">{{ payment.total_allowance|comma }}</td>
                <td>ê±´ê°•ë³´í—˜</td><td style="text-align:right; color: #e74c3c;">{{ payment.health_insurance|comma }}</td>
            </tr>
            <tr>
                <td></td><td></td>
                <td>ì¥ê¸°ìš”ì–‘</td><td style="text-align:right; color: #e74c3c;">{{ payment.care_insurance|comma }}</td>
            </tr>
            <tr>
                <td></td><td></td>
                <td>ê³ ìš©ë³´í—˜</td><td style="text-align:right; color: #e74c3c;">{{ payment.employment_insurance|comma }}</td>
            </tr>
            <tr>
                <td></td><td></td>
                <td>ì†Œë“ì„¸(ì§€ë°©ì„¸)</td><td style="text-align:right; color: #e74c3c;">{{ payment.income_tax|comma }}({{ payment.local_tax|comma }})</td>
            </tr>
            <tr style="background-color: #f9f9f9; font-weight: bold;">
                <td>ì§€ê¸‰ ì´ì•¡</td><td style="text-align:right;">{{ (payment.total_base + payment.total_allowance)|comma }}</td>
                <td>ê³µì œ ì´ì•¡</td><td style="text-align:right; color: #e74c3c;">{{ payment.total_deduction|comma }}</td>
            </tr>
        </table>
        <div style="text-align: center; margin-top: 20px; padding: 15px; background-color: #e8f8f5; border-radius: 8px;">
            <h2 style="margin: 0; color: #27ae60;">ì‹¤ ìˆ˜ë ¹ì•¡: {{ payment.net_salary|comma }} ì›</h2>
        </div>
        {% else %}
        <p style="text-align: center; padding: 30px;">ì´ë²ˆ ë‹¬ í™•ì •ëœ ê¸‰ì—¬ ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤.</p>
        {% endif %}
    </div>
</div>
<div class="card" style="grid-column: 2 / 3;">
    <div class="card-header">ğŸ“œ ìµœê·¼ ê¸‰ì—¬ ì´ë ¥</div>
    <div class="card-body" style="overflow-y: auto;">
        <table class="employee-table">
            <thead><tr><th>ê·€ì†ì›”</th><th>ì§€ê¸‰ì´ì•¡</th><th>ì‹¤ìˆ˜ë ¹ì•¡</th><th>ìƒíƒœ</th></tr></thead>
            <tbody>
            {% for h in history %}
                <tr>
                    <td>{{ h.payment_year }}.{{ h.payment_month }}</td>
                    <td>{{ (h.total_base + h.total_allowance)|comma }}</td>
                    <td style="font-weight: bold;">{{ h.net_salary|comma }}</td>
                    <td><span class="status-indicator approved">ì§€ê¸‰ì™„ë£Œ</span></td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}